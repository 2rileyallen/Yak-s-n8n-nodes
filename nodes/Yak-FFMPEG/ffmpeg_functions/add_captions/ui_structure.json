{
    "properties": [
        {
            "displayName": "--- Output Settings ---",
            "name": "outputSettingsNotice",
            "type": "notice",
            "default": ""
        },
        {
            "displayName": "Output as Transparent Overlay",
            "name": "outputAsTransparentOverlay",
            "type": "boolean",
            "default": true,
            "description": "When true, creates a video with a transparent background containing only the captions. When false, burns captions onto an existing input video."
        },
        {
            "displayName": "Output as File Path",
            "name": "outputAsFilePath",
            "type": "boolean",
            "default": true,
            "description": "Whether to save the output to a specified file path. Uncheck to output as binary data."
        },
        {
            "displayName": "Output File Path",
            "name": "outputFilePath",
            "type": "string",
            "default": "",
            "displayOptions": {
                "show": {
                    "outputAsFilePath": [
                        true
                    ]
                }
            },
            "placeholder": "/path/to/output.mov",
            "description": "The full file path to save the output media. Use .mov for transparency.",
            "required": true
        },
        {
            "displayName": "Output Binary Property Name",
            "name": "outputBinaryPropertyName",
            "type": "string",
            "default": "data",
            "displayOptions": {
                "show": {
                    "outputAsFilePath": [
                        false
                    ]
                }
            },
            "description": "The name to give the output binary property."
        },
        {
            "displayName": "--- Source Settings ---",
            "name": "sourceSettingsNotice",
            "type": "notice",
            "default": ""
        },
        {
            "displayName": "Use Input Video File Path",
            "name": "inputVideoUseFilePath",
            "type": "boolean",
            "default": true,
            "displayOptions": {
                "show": {
                    "outputAsTransparentOverlay": [
                        false
                    ]
                }
            },
            "description": "Toggle to use a direct file path for the input video. Uncheck to use binary data from a previous node."
        },
        {
            "displayName": "Input Video File Path",
            "name": "inputVideoFilePath",
            "type": "string",
            "default": "",
            "displayOptions": {
                "show": {
                    "outputAsTransparentOverlay": [
                        false
                    ],
                    "inputVideoUseFilePath": [
                        true
                    ]
                }
            },
            "placeholder": "/path/to/source_video.mp4",
            "description": "The source video to burn the captions onto.",
            "required": true
        },
        {
            "displayName": "Input Video Binary Property",
            "name": "inputVideoBinaryPropertyName",
            "type": "string",
            "default": "data",
            "displayOptions": {
                "show": {
                    "outputAsTransparentOverlay": [
                        false
                    ],
                    "inputVideoUseFilePath": [
                        false
                    ]
                }
            },
            "description": "The name of the binary property containing the input video data.",
            "required": true
        },
        {
            "displayName": "Video Width",
            "name": "videoWidth",
            "type": "number",
            "default": 1080,
            "displayOptions": {
                "show": {
                    "outputAsTransparentOverlay": [
                        true
                    ]
                }
            },
            "description": "The width of the transparent video canvas in pixels."
        },
        {
            "displayName": "Video Height",
            "name": "videoHeight",
            "type": "number",
            "default": 1920,
            "displayOptions": {
                "show": {
                    "outputAsTransparentOverlay": [
                        true
                    ]
                }
            },
            "description": "The height of the transparent video canvas in pixels."
        },
        {
            "displayName": "Transcription Data",
            "name": "transcriptionData",
            "type": "json",
            "default": "",
            "placeholder": "{{ $json.words }}",
            "description": "The JSON output from a Whisper transcription node containing word-level timestamps.",
            "required": true
        },
        {
            "displayName": "Maximum Words per Line",
            "name": "maxWordsPerLine",
            "type": "number",
            "typeOptions": {
                "minValue": 1
            },
            "default": 7,
            "description": "The maximum number of words to group into a single caption line."
        },
        {
            "displayName": "--- Style & Position ---",
            "name": "stylePositionNotice",
            "type": "notice",
            "default": ""
        },
        {
            "displayName": "Aspect Ratio",
            "name": "aspectRatio",
            "type": "options",
            "options": [
                {
                    "name": "Portrait (9:16)",
                    "value": "9:16"
                },
                {
                    "name": "Landscape (16:9)",
                    "value": "16:9"
                }
            ],
            "default": "9:16",
            "description": "Select the aspect ratio to determine positioning presets."
        },
        {
            "displayName": "Font Family",
            "name": "fontFamily",
            "type": "options",
            "options": [
                { "name": "Anton", "value": "anton" },
                { "name": "Asimovian", "value": "asimovian" },
                { "name": "Bebas Neue", "value": "bebasNeue" },
                { "name": "Caprasimo", "value": "caprasimo" },
                { "name": "Libertinus Keyboard", "value": "libertinusKeyboard" },
                { "name": "Libre Barcode 39 Text", "value": "libreBarcode" },
                { "name": "Roboto", "value": "roboto" },
                { "name": "Silkscreen", "value": "silkscreen" },
                { "name": "Story Script", "value": "storyScript" },
                { "name": "Trade Winds", "value": "tradeWinds" }
            ],
            "default": "roboto",
            "description": "Select the font for the text."
        },
        {
            "displayName": "Font Size",
            "name": "fontSize",
            "type": "number",
            "typeOptions": {
                "minValue": 10,
                "maxValue": 400
            },
            "default": 48,
            "description": "Set the font size in pixels."
        },
        {
            "displayName": "Font Color",
            "name": "fontColor",
            "type": "color",
            "default": "#FFFFFF",
            "description": "The main color of the text."
        },
        {
            "displayName": "Font Outline Color",
            "name": "fontOutlineColor",
            "type": "color",
            "default": "#000000",
            "description": "The color of the border around the text."
        },
        {
            "displayName": "Outline Thickness",
            "name": "outlineThickness",
            "type": "number",
            "typeOptions": {
                "minValue": 0
            },
            "default": 2,
            "description": "The thickness of the text border in pixels."
        },
                {
            "displayName": "Enable Background",
            "name": "enableBackground",
            "type": "boolean",
            "default": false,
            "description": "Toggle to draw a background box behind the text for better readability."
        },
        {
            "displayName": "Background Color",
            "name": "backgroundColor",
            "type": "color",
            "default": "#000000",
            "displayOptions": {
                "show": {
                    "enableBackground": [
                        true
                    ]
                }
            },
            "description": "The color of the background box."
        },
        {
            "displayName": "Background Padding (pixels)",
            "name": "backgroundPadding",
            "type": "number",
            "typeOptions": {
                "minValue": 0
            },
            "default": 10,
            "displayOptions": {
                "show": {
                    "enableBackground": [
                        true
                    ]
                }
            },
            "description": "The amount of space between the text and the edge of the background box."
        },
        {
            "displayName": "Background Opacity",
            "name": "backgroundOpacity",
            "type": "number",
            "typeOptions": {
                "minValue": 0.0,
                "maxValue": 1.0,
                "numberStep": 0.1
            },
            "default": 0.8,
            "displayOptions": {
                "show": {
                    "enableBackground": [
                        true
                    ]
                }
            },
            "description": "Set the opacity of the background box (0.0 = fully transparent, 1.0 = fully solid)."
        },
        {
            "displayName": "Use Rounded Corners",
            "name": "useRoundedCorners",
            "type": "boolean",
            "default": true,
            "displayOptions": {
                "show": {
                    "enableBackground": [
                        true
                    ]
                }
            },
            "description": "Toggle to use rounded corners for the background box."
        },
        {
            "displayName": "Use Custom Coordinates",
            "name": "useCustomCoordinates",
            "type": "boolean",
            "default": false,
            "description": "Toggle to manually set X/Y coordinates instead of using presets."
        },
        {
            "displayName": "Preset Position (Portrait)",
            "name": "presetPositionPortrait",
            "type": "options",
            "displayOptions": {
                "show": {
                    "useCustomCoordinates": [
                        false
                    ],
                    "aspectRatio": [
                        "9:16"
                    ]
                }
            },
            "options": [
                { "name": "Top", "value": "top" },
                { "name": "Middle", "value": "middle" },
                { "name": "Bottom", "value": "bottom" }
            ],
            "default": "bottom"
        },
        {
            "displayName": "Preset Position (Landscape)",
            "name": "presetPositionLandscape",
            "type": "options",
            "displayOptions": {
                "show": {
                    "useCustomCoordinates": [
                        false
                    ],
                    "aspectRatio": [
                        "16:9"
                    ]
                }
            },
            "options": [
                { "name": "Top Left", "value": "topLeft" },
                { "name": "Top Center", "value": "topCenter" },
                { "name": "Top Right", "value": "topRight" },
                { "name": "Middle Left", "value": "middleLeft" },
                { "name": "Middle Center", "value": "middleCenter" },
                { "name": "Middle Right", "value": "middleRight" },
                { "name": "Bottom Left", "value": "bottomLeft" },
                { "name": "Bottom Center", "value": "bottomCenter" },
                { "name": "Bottom Right", "value": "bottomRight" }
            ],
            "default": "bottomCenter"
        },
        {
            "displayName": "X Coordinate",
            "name": "xCoordinate",
            "type": "number",
            "displayOptions": {
                "show": {
                    "useCustomCoordinates": [
                        true
                    ]
                }
            },
            "default": 10,
            "description": "Horizontal position in pixels from the left edge."
        },
        {
            "displayName": "Y Coordinate",
            "name": "yCoordinate",
            "type": "number",
            "displayOptions": {
                "show": {
                    "useCustomCoordinates": [
                        true
                    ]
                }
            },
            "default": 10,
            "description": "Vertical position in pixels from the top edge."
        }
    ]
}

